<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Stylish Portfolio - Start Bootstrap Theme</title>

    <!-- Bootstrap Core CSS -->
    <link href="../../static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../../static/css/stylish-portfolio.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="../../static/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="../../static/http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">

        // Load the Visualization API and the ColumnChart package.
        google.load('visualization', '1', {'packages':['corechart']});

        // Set a callback to run when the Google Visualization API is loaded.
        google.setOnLoadCallback(drawChart);

        // Callback that creates and populates a data table,
        // instantiates the pie chart, passes in the data and
        // draws it.
        function drawChart() {
            // Create our data table.
            var data = new google.visualization.DataTable();
            data.addColumn('string', 'Day');
            data.addColumn('number', 'Number of frobnications');
            data.addRows([
                // Instead of plugging in the values manually, or reading them
                // from a Data Source like Google Spreadsheets, feed them in
                // using Jinja, the templating system Flask uses.
                // Each iteration evaluates to something like this:
                // ['Saturday', 28],
                {%- for dayname, num in data %}
                    ['{{ dayname }}', {{ num }}],
                {%- endfor %}
            ]);
            // Instantiate and draw our chart, passing in some options.  All the
            // options go into a single {}; some options' values go into a nested
            // {}. Some values, such as colors, must be given as strings.  The
            // Google Charts API is well-documented.
            var chart = new google.visualization.ColumnChart(
                    document.getElementById('chart_div'));
            chart.draw(data, {legend: 'none', vAxis: {baseline: 0},
                colors: ['#337ab7']});
        }
    </script>

    <style>
        #content {
            width: 80%;
            height: 60%;
            min-width: 800px;
            /* Center the div. */
            margin-right: auto;
            margin-left: auto;
            /*color: #A0D100;*/
            text-align: center;
        }
        #chart_div {
            min-height: 400px;
        }
    </style>

    <script type="text/javascript"
            src="https://www.google.com/jsapi?autoload={
            'modules':[{
              'name':'visualization',
              'version':'1',
              'packages':['corechart']
            }]
          }"></script>

    <script type="text/javascript">
        google.setOnLoadCallback(drawChart);

        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['Year', 'AvgSalePrice', 'Expenses'],
                ['2004',  1000,      400],
                ['2005',  1170,      460],
                ['2006',  660,       1120],
                ['2007',  1030,      540]
            ]);

            var options = {
                title: 'Company Performance',
                curveType: 'function',
                legend: { position: 'bottom' }
            };

            var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

            chart.draw(data, options);
        }
    </script>


</head>

<body>
{% set zipcode = '85331r25' %}

<!-- Navigation -->
<a id="menu-toggle" href="#" class="btn btn-dark btn-lg toggle"><i class="fa fa-bars"></i></a>
<nav id="sidebar-wrapper">
    <ul class="sidebar-nav">
        <a id="menu-close" href="#" class="btn btn-light btn-lg pull-right toggle"><i class="fa fa-times"></i></a>
        <li class="sidebar-brand">
            <a href="#top"  onclick = $("#menu-close").click(); >Start Bootstrap</a>
        </li>
        <li>
            <a href="#top" onclick = $("#menu-close").click(); >Home</a>
        </li>
        <li>
            <a href="#about" onclick = $("#menu-close").click(); >About</a>
        </li>
        <li>
            <a href="#services" onclick = $("#menu-close").click(); >Services</a>
        </li>
        <li>
            <a href="#portfolio" onclick = $("#menu-close").click(); >Portfolio</a>
        </li>
        <li>
            <a href="#contact" onclick = $("#menu-close").click(); >Contact</a>
        </li>
    </ul>
</nav>

<!-- Header -->
<header id="top" class="header">
    <div class="text-vertical-center">
        <div style="background-color:rgba(0,0,0,0.45);">
            <h1 style="color:#ccc">{{ neighborname }}</h1>
        </div>
        <br>
        <a href="#about" class="btn btn-dark btn-lg">Find Out More</a>
    </div>
</header>

<!-- About -->
<section id="about" class="about">
    <div class="container">
        <div style="height:400px" id="map"></div>
        <div class="row">
            <div class="col-lg-12 text-center">
                <h2>Stylish Portfolio is the perfect theme for your next project!</h2>
                <p class="lead">This theme features some wonderful photography courtesy of <a id="demon" target="_blank" href="javascript:;">Death to the Stock Photo</a>.</p>

            </div>
        </div>
        <!-- /.row -->
    </div>
    <!-- /.container -->
</section>

<div class="modal" id="myModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="photo">
                <h3>
                    <a id="modal_hood_title" href="" title="Longueuil sur le Parc's Neighborhood Profile" data-ng-bind="neighborhood.name" class="ng-binding">Longueuil sur le Parc</a>
                </h3>

                <a class="photo-link" href="/neighborhoods/montreal/longueuil/longueuilsurleparc" title="Longueuil sur le Parc's Neighborhood Profile">

                    <img class='photo' id="modal_hood_image" src="https://s3.amazonaws.com/n_neighborhoods/raw-longueuil-sur-le-parc-300x200.jpg" alt="Longueuil's Photo">
                </a>
            </div>

            <div class="details">
                <p id="desc_gist" class="summary ng-binding" data-ng-bind="neighborhood.title">A convenient greenspot</p>
                <p id="desc_summary" class="description ng-binding">This area of Longueuil wears its name well, as the greenest area of the entire city. Huge Michel-Chartrand Park offers a wonderful respite to famil...<a href="/neighborhoods/montreal/longueuil/longueuilsurleparc" title="Find out more about Longueuil sur le Parc"> See Neighborhood Profile</a></p>
            </div>
            {#        <div class="modal-header">#}
            {#          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>#}
            {#          <h4 id="modal_hood_title" class="modal-title">Modal title</h4>#}
            {#        </div>#}
            {#        <div class="modal-body">#}
            {#          <img id="image-gallery-image" class="img-responsive" src="http://upload.wikimedia.org/wikipedia/commons/7/78/1997_Fiat_Panda.JPG">#}
            {#        </div>#}
        </div>
    </div>
</div>

<script>
    var markerurl = 'listing/' + '{{ neighborid }}';
    var markerdata;
    $.ajax({
                url: markerurl,
                type: 'get',
                contentType: 'application/json',
                dataType: 'json',
                success: function (data, status, xhr) {
                    console.log('SUCCESS!!!!');
                    //console.log(data);
                    markerdata = data.bundle;
                    //successAction(data);

                    //console.log(markerdata[i].coordinates[0]);
                },
            async: false
    });



    var map_data;
    var map;
    var url = 'polygon/' + '{{ neighborid }}';

    $.ajax({

        url: url,
        type: 'get',
        contentType: 'application/json',
        dataType: 'json',
        success: function (data, status, xhr) {
            map_data = JSON.parse(data);
            //successAction(data);
        },
        async: false
    });
    console.log('hello');


    function initMap() {
        var zoom_var = 11;

        map = new google.maps.Map(document.getElementById('map'), {
            zoom: zoom_var,
            scrollwheel: false
        });

        map_coord = map_data.features[0].geometry.coordinates[0][0][0];
        map_color = map_data.features[0].properties.color;
        map.data.addGeoJson(map_data);

        map.data.setStyle(function (feature) {
            return {
                fillColor: feature.getProperty('color'),
                fillOpacity: 0.8,
                strokeColor: 'black',
                strokeWeight: 1
            };
        });

        map.setCenter(new google.maps.LatLng(map_coord[1], map_coord[0]));

        map.data.addListener('mouseover', function (event) {
            map.data.revertStyle();
            map.data.overrideStyle(event.feature, {strokeWeight: 8});
            document.getElementById('modal_hood_title').textContent = event.feature.getProperty('NAME');
            //console.log(document.getElementById('modal_hood_image').attr('src'));
            // debugger;
            $('#modal_hood_image').attr('src', event.feature.getProperty('media'))
            //document.getElementById('modal_hood_image').attr('src').replace(event.feature.getProperty('media'));
            /* other options*/
        });
        var listings = [];
       for(var i = 0; i < markerdata.length; i++) {
       var associativeArray = {};
        var ownership = markerdata[i]['ownership'];
       var price = markerdata[i]['originalPrice'];
        var daysonmarket = markerdata[i]['daysOnMarket'];
        associativeArray["ownership"] = ownership;
        associativeArray["originalPrice"] = price;
        associativeArray["daysOnMarket"] = daysonmarket;
        associativeArray["agent"] = markerdata[i]['agent'];
           listings.push(associativeArray);
    }
        map.data.addListener('click',function(event){
            $('#myModal').modal({show:true})
        });
{#        $('#myModal').on('show.bs.modal', function(event) {#}
{#            $('#myModal').html("404 not found")#}
{#        });#}
    }

</script>

<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCewFxO002NOxwqXvamA2YSGC3aBVJwLQo&signed_in=true&callback=initMap"></script>

<!-- Services -->
<!-- The circle icons use Font Awesome's stacked icon classes. For more information, visit http://fontawesome.io/examples/ -->
<section id="services" class="services bg-primary">
    <div class="container">
        <div class="row text-center">
            <div class="col-lg-10 col-lg-offset-1">
                <h2>Property types</h2>
                <hr class="small">
                <div class="row">
                    <div class="col-md-3 col-sm-6">
                        <div class="service-item">
                            <img src="../static/img/condominium_final.png/" alt="condos" height="82" width="82">
                            </span>
                            <h4>
                                <strong>Condominiums</strong>
                            </h4>
                            <h3><p>72.4%</p></h3>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6">
                        <div class="service-item">
                            <img src="../static/img/single_fam.png/" alt="single detached" height="82" width="82">
                            </span>
                            <h4>
                                <strong>Single family detached home</strong>
                            </h4>
                            <h3><p>12.3%</p></h3>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6">
                        <div class="service-item">
                            <img src="../static/img/townhouse.png/" alt="single detached" height="82" width="82">
                            </span>
                            <h4>
                                <strong>Townhouses</strong>
                            </h4>
                            <h3><p>8.9%</p></h3>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6">
                        <div class="service-item">
                            <img src="../static/img/Skyscraper.png/" alt="single detached" height="92" width="82">
                            </span>
                            <h4>
                                <strong>High rise apartments</strong>
                            </h4>
                            <h3><p>0.9%</p></h3>
                        </div>
                    </div>
                </div>
                <!-- /.row (nested) -->
            </div>
            <!-- /.col-lg-10 -->
        </div>
        <!-- /.row -->
    </div>
    <!-- /.container -->
</section>

<!-- Callout -->
<aside class="callout">
    <div class="text-vertical-center">
        <h1>Peace of Mind</h1>
    </div>
</aside>

<!-- Portfolio -->
<section id="portfolio" class="portfolio">
    <div class="container">
        <div class="row">
            <div class="col-lg-10 col-lg-offset-1 text-center">
                <h2>Top agents in this neighborhood</h2>
                <hr class="small">
                <div class="row">
                    <div class="col-md-6">
                        <div class="portfolio-item">
                            <a href="#">
                                <img class="img-portfolio img-responsive" src="../static/img/profile.jpg">
                            </a>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="portfolio-item">
                            <a href="#">
                                <img class="img-portfolio img-responsive" src="../static/img/profile.jpg">
                            </a>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="portfolio-item">
                            <a href="#">
                                <img class="img-portfolio img-responsive" src="../static/img/profile.jpg">
                            </a>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="portfolio-item">
                            <a href="#">
                                <img class="img-portfolio img-responsive" src="../static/img/profile.jpg">
                            </a>
                        </div>
                    </div>
                </div>

            </div>
            <!-- /.col-lg-10 -->

        </div>
        <!-- /.row -->
    </div>
    <!-- /.container -->
</section>

<div class="box"><iframe style="float:left; width:100%" src='http://www.movoto.com/MarketChartIframe?type=0&stateCode=az&cityNameInURL=phoenix&city2=&time=5Y&metric=Median%20List%20Price' height='420' width='2040' frameborder='0' scrolling='no'></iframe><br/></div>
<div class="box"><iframe style="float:left; width:100%" src='http://www.movoto.com/MarketChartIframe?type=0&stateCode=az&cityNameInURL=tucson&city2=&time=5Y&metric=Median%20List%20Price' height='420' width='2040' frameborder='0' scrolling='no'></iframe><br/></div>
<div class="box"><iframe style="float:left;width:100%" src='http://www.movoto.com/MarketChartIframe?type=0&stateCode=az&cityNameInURL=tucson&city2=&time=5Y&metric=Median%20List%20Price' height='420' width='2040' frameborder='0' scrolling='no'></iframe><br/></div>

<!-- jQuery -->
<script src='http://codepen.io/assets/libs/fullpage/jquery.js'></script>

<!-- Bootstrap Core JavaScript -->
<script src="../../static/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script>
    // Closes the sidebar menu
    $("#menu-close").click(function(e) {
        e.preventDefault();
        $("#sidebar-wrapper").toggleClass("active");
    });

    // Opens the sidebar menu
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#sidebar-wrapper").toggleClass("active");
    });

    // Scrolls to the selected menu item on the page
    $(function() {
        $('a[href*=#]:not([href=#])').click(function() {
            if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') || location.hostname == this.hostname) {

                var target = $(this.hash);
                target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
                if (target.length) {
                    $('html,body').animate({
                        scrollTop: target.offset().top
                    }, 1000);
                    return false;
                }
            }
        });
    });
</script>

</body>

</html>
